(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/feedback/feedback"],{"03df":function(t,e,n){"use strict";(function(t){n("e79e");a(n("66fd"));var e=a(n("3c70"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"2c9b":function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return a}));var a={uniIcons:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(n.bind(null,"732a"))}},u=function(){var t=this,e=t.$createElement;t._self._c},c=[]},"362f":function(t,e,n){"use strict";n.r(e);var a=n("5270"),u=n.n(a);for(var c in a)"default"!==c&&function(t){n.d(e,t,(function(){return a[t]}))}(c);e["default"]=u.a},"3c70":function(t,e,n){"use strict";n.r(e);var a=n("2c9b"),u=n("362f");for(var c in u)"default"!==c&&function(t){n.d(e,t,(function(){return u[t]}))}(c);n("6937");var i,o=n("f0c5"),r=Object(o["a"])(u["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],i);e["default"]=r.exports},5270:function(t,e,n){"use strict";(function(t,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=c(n("a34a"));function c(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,a,u,c,i){try{var o=t[c](i),r=o.value}catch(s){return void n(s)}o.done?e(r):Promise.resolve(r).then(a,u)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(a,u){var c=t.apply(e,n);function o(t){i(c,a,u,o,r,"next",t)}function r(t){i(c,a,u,o,r,"throw",t)}o(void 0)}))}}var r={data:function(){return{imageList:[],content:""}},methods:{submit:function(){var e=this;return o(u.default.mark((function n(){var a,c,i,o;return u.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.content){n.next=3;break}return t.showToast({title:"请输入内容",icon:"none"}),n.abrupt("return");case 3:t.showLoading(),a=[],c=0;case 6:if(!(c<e.imageList.length)){n.next=15;break}return i=e.imageList[c].url,n.next=10,e.uploadFiles(i);case 10:o=n.sent,a.push(o);case 12:c++,n.next=6;break;case 15:e.setUpdateFeedback({content:e.content,feedbackImages:a});case 16:case"end":return n.stop()}}),n)})))()},uploadFiles:function(t){var e=this;return o(u.default.mark((function n(){var c;return u.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a.uploadFile({filePath:t,cloudPath:"".concat(e.getID(5),".png")});case 2:return c=n.sent,n.abrupt("return",c.fileID);case 4:case"end":return n.stop()}}),n)})))()},getID:function(t){return Number(Math.random().toString().substr(3,t)+Date.now()).toString(36)},setUpdateFeedback:function(e){var n=this,a=e.content,u=e.feedbackImages;this.$api.update_feedback({content:a,feedbackImages:u}).then((function(e){t.hideLoading(),t.showToast({title:"反馈提交成功",icon:"none"}),setTimeout((function(){t.switchTab({url:"/pages/tabbar/my/my"}),n.content=""}),2e3)})).catch((function(e){t.hideLoading(),t.showToast({title:"反馈提交失败",icon:"none"})}))},chooseImage:function(){var e=this,n=5-this.imageList.length;t.chooseImage({count:n,success:function(t){var a=t.tempFilePaths;a.forEach((function(t,a){a<n&&e.imageList.push({url:t})}))}})},closeImage:function(t){this.imageList.splice(t,1)}}};e.default=r}).call(this,n("543d")["default"],n("a9ff")["default"])},6937:function(t,e,n){"use strict";var a=n("6fec"),u=n.n(a);u.a},"6fec":function(t,e,n){}},[["03df","common/runtime","common/vendor"]]]);